import{_ as f,o as d,c as _,p as g,k as w,a as e,r as c,s as E,w as v,v as m,d as q,b as V,F as b,x as L,y as x,i as I,m as U,t as $,h as M}from"./index-a1a3bc01.js";import{_ as N}from"./send-b4cecd4b.js";import{a as S}from"./axios-4a70c6fc.js";const T={},j=s=>(g("data-v-537dd02a"),s=s(),w(),s),A={class:"w-100 vh-100 d-flex ai-center jc-center spinnerCont"},D=j(()=>e("div",{class:"spinner"},[e("div"),e("div"),e("div")],-1)),F=[D];function R(s,o){return d(),_("div",A,F)}const z=f(T,[["render",R],["__scopeId","data-v-537dd02a"]]);const B=s=>(g("data-v-c3b74c2a"),s=s(),w(),s),K={class:"modal"},O={class:"modal-content"},P=B(()=>e("h2",{class:"modal-title"},"Registro",-1)),G=["onSubmit"],H={class:"form-group"},J={class:"form-group"},Q={class:"form-group"},X=B(()=>e("button",{class:"submit",type:"submit"},"Registrarse",-1)),W={__name:"LoginBot",setup(s){const o=c(""),l=c(""),i=c(""),h=()=>{};return(p,a)=>(d(),_("div",K,[e("div",O,[e("span",{class:"close",onClick:a[0]||(a[0]=(...n)=>p.closeModal&&p.closeModal(...n))},"×"),P,e("form",{onSubmit:E(h,["prevent"])},[e("div",H,[v(e("input",{"onUpdate:modelValue":a[1]||(a[1]=n=>o.value=n),type:"email",placeholder:"Email",required:""},null,512),[[m,o.value]])]),e("div",J,[v(e("input",{"onUpdate:modelValue":a[2]||(a[2]=n=>l.value=n),type:"password",placeholder:"Password",required:""},null,512),[[m,l.value]])]),e("div",Q,[v(e("input",{"onUpdate:modelValue":a[3]||(a[3]=n=>i.value=n),type:"password",placeholder:"Confirmar password",required:""},null,512),[[m,i.value]])]),X],40,G)])]))}},Y=f(W,[["__scopeId","data-v-c3b74c2a"]]),y=s=>(g("data-v-a7f8252a"),s=s(),w(),s),Z=y(()=>e("p",{class:"text-center px-1",style:{color:"brown",margin:"2rem auto 0","font-size":"12px","max-width":"450px"}},'"Esta versión es una beta, el historial de las conversaciones puede ser visualizado por otras personas y será eliminado de manera periódica. En un futuro próximo, tendrás la opción de guardarlo para consultarlo siempre que lo necesites.',-1)),ee={class:"d-ib va-t w-50 p-2 mt-1 bot"},te={class:"answerbot pr-1"},se={class:"send"},oe={class:"botanswer",style:{"white-space":"pre-line"}},ae=y(()=>e("div",{id:"endChat",class:"mt-2 w-100"},null,-1)),ne={class:"d-flex ai-center inputUser mt-1",style:{position:"relative"}},re=y(()=>e("p",{class:"text-center mt-2"},[M("Dejanos saber que opinas "),e("a",{href:"https://forms.gle/Nj27Lg1eXGhv6eeT6",target:"_blank"},"Aquí")],-1)),C="https://api-chatbot.letsdoitnow.us/api",le=q({__name:"ChatBot",setup(s){const o=c(""),l=c([]),i=c(!1),h=c(!1),p=async()=>{i.value=!0,JSON.parse(localStorage.getItem("user"))|"";try{const t=await S.post(`${C}/chats/expert`,{userId:"64d5d5d3877039bb218d3702",expertId:"64d5d76f24206155ff312cc6"},{});l.value=t.data.slice().reverse()}catch(t){console.log(t)}i.value=!1},a=async()=>{console.log(o.value),i.value=!0,o.value!=""&&(l.value.push({question:o.value,answer:""}),n(),await S.post(`${C}/chats`,{userId:"64d5d5d3877039bb218d3702",expertId:"64d5d76f24206155ff312cc6",userQuestion:o.value},{}).then(t=>{l.value[l.value.length-1].answer=t.data.answer,o.value="",n()}).catch(t=>{console.log(t)})),i.value=!1,n()},n=()=>{const t=document.getElementById("endChat");t&&t.scrollIntoView({behavior:"smooth",block:"end"})},k=t=>{const r=t.indexOf("</end>");return r!==-1?t.substring(0,r):t};return V(async()=>{await p(),localStorage.getItem("user")&&await p(),localStorage.getItem("chat")!=null&&(o.value=localStorage.getItem("chat")|"",localStorage.removeItem("chat"),a()),n()}),(t,r)=>(d(),_(b,null,[Z,e("div",ee,[e("div",te,[(d(!0),_(b,null,L(l.value,u=>(d(),_("div",null,[e("p",se,$(u.question),1),e("p",oe,$(k(u.answer)),1)]))),256)),ae,i.value?(d(),x(z,{key:0})):I("",!0)]),e("div",ne,[v(e("input",{class:"w-100",style:{"padding-right":"3rem"},type:"text",placeholder:"Escribe algo","onUpdate:modelValue":r[0]||(r[0]=u=>o.value=u),onKeypress:r[1]||(r[1]=U(u=>a(),["enter"]))},null,544),[[m,o.value]]),e("img",{style:{right:"10px",position:"absolute"},class:"cursor-p",src:N,alt:"",onClick:r[2]||(r[2]=u=>a())})])]),re,h.value?(d(),x(Y,{key:0})):I("",!0)],64))}});const ue=f(le,[["__scopeId","data-v-a7f8252a"]]);export{ue as default};
